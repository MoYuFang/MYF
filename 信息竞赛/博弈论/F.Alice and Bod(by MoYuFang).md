[[2023ICPCAsiaOnlineContestOne]F.Alice and Bod ](../题面/[2023ICPCAsiaOnlineContestOne]F.Alice and Bod.png) 

将三个数从小到大排序后，分别减去最小的数，得到 $(0, x, x+y)$ 三元组。

当 $1\le y \le x$ 时，$(0,x,x+y)$ 可以达到 $(y,x,x)$ 以及 $(y+k,x,x-k)$，而 $(y,x,x)$ 只能到达 $(y+k,x,x-k)$。

若记 $A=(0,x,x+y),B=(y,x,x)$ 则 $B$ 的后继局面都可以通过 $A$ 到达，即 $B\in next(A),\ next(B)\sub next(A)$。

这样的结构说明了 $A$ 为必胜局面，这是因为不论 $B$ 为必胜局面还是必败局面，$A$ 的后继局面中都能找到必败局面。

证明：若 $B$ 为必胜局面，则 $next(B)$ 不为空且其中的局面都是必败局面，考虑 $next(B)\sub next(A)$ 可知 $A$ 的后继局面中有必败局面，所以 $A$ 为必胜局面；若 $B$ 为必败局面，则 $A$ 为必胜局面。证毕。

当 $(1\le x\le y)$ 时，可以通过类似的方法证明 $(0,x,x+y)$ 是必胜局面。

综合上述两种情况得到 $(0,x,x+y)\ (x\ge 1,y\ge 1)$ 是必胜局面，这等价于三元组中每个数互不相等。

接下来只需要考虑 $x=0$ 和 $y=0$ 的情况即可。

显然 $(0,0,0),(0,1,1),(0,0,1)$ 都是必败局面。

在 $n\ge 1$的情况下，首先考虑 $(0,0,2n+1)$ 与 $(0,0,2n)$ 的胜负情况。

$(0,0,2n+1)$ 一定必败局面，因为它的后继局面必为 $(0,k,2n+1-k)\ (1\le k\le n+1)$，三个数互不相等，为必胜局面。

$(0,0,2n)$ 的后继局面包含 $(0,k,2n-k)\ (1\le k\le n-1)$ 和 $(0, n, n)$ 两种，第一种均为必胜局面，所以 $(0,0,2n)$ 的胜负情况与 $(0,n,n)$ 正好相反。

然后考虑 $(0,2n+1,2n+1)$ 与 $(0,2n,2n)$，用类似的方法可知 $(0,2n+1,2n+1)$ 为必败局面，$(0,2n,2n)$ 的胜负情况与 $(0,0,n)$ 正好相反。

稍加思索便可得到结论，在 $m\ge 1$ 的情况下 $(0,m,m)$ 与 $(0,0,m)$ 的胜负情况相同，若记 $m=2^k\cdot m^\prime(k\ge 0,2\nmid m^\prime)$，则当且仅当 $k$ 为偶数是，这两种局面为必败局面。

不难发现，一个数字包含多少个 $2$ 只与最低位的 $0$ 在哪有关，那么两数之差对应的就是两个数最低在哪一位出现不同。那么依次把数字从低到高位插入 $\text{01-Trie}$ 就可以算出有多少个必败局面了。